#!/usr/bin/env bash
# Install and configure Nginx web server

# Update package lists
apt-get update

# Install Nginx
apt-get install -y nginx

# Create a custom Nginx index.html file
echo "Holberton School" > /var/www/html/index.html

# Restart Nginx without using systemctl
service nginx restart

# Check if Nginx is running and listening on port 80
if [ "$(lsof -i :80 | grep nginx)" ]; then
    echo "Nginx is running and listening on port 80."
else
    echo "Nginx failed to start or is not listening on port 80."
    exit 1
fi

# Check if the root page contains the required string
response=$(curl -sI http://localhost | grep "Holberton School")
if [ -n "$response" ]; then
    echo "The root page contains the required string: 'Holberton School'"
else
    echo "The root page does not contain the required string: 'Holberton School'"
    exit 1
fi

echo "Configuration completed successfully."
